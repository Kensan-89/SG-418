<context>
  <story>
    **Story 1.2: Basic Task Creation & Management**

    As a logged-in user,
    I want to create, view, edit, and delete personal tasks,
    So that I can manage my basic to-do list within the application.

    **Acceptance Criteria:**
    1. The UI provides a clear way to add a new task with a title and due date.
    2. All created tasks are displayed in a list.
    3. Each task in the list has options to edit its title and due date.
    4. Each task can be marked as "complete".
    5. Each task has an option to be deleted.
  </story>

  <tech-spec>
    **Stories 1.2, 1.3, & 1.4: Task Management (Create, Edit, Delete, Complete)**

    *   **Frontend:**
        *   A new page will be created at `/pages/tasks.tsx` to display and manage tasks.
        *   This page will fetch tasks from the backend using `useQuery` from `@tanstack/react-query`.
        *   A form component will be created to add new tasks. This form will use `useMutation` from `@tanstack/react-query` to send a `POST` request to the backend.
        *   Each task in the list will have "Edit" and "Delete" buttons, and a checkbox to mark as complete.
        *   Editing will open a modal or inline form to update the task.
        *   Deleting will trigger a `DELETE` request.
        *   The checkbox will trigger a `PUT` request to update the `isCompleted` status.
    *   **Backend:**
        *   API routes will be created:
            *   `POST /api/tasks`: Creates a new task. It will expect `title` in the request body.
            *   `PUT /api/tasks/:id`: Updates a task. It can update `title`, `description`, or `isCompleted`.
            *   `DELETE /api/tasks/:id`: Deletes a task.
        *   These API routes will use Prisma Client to perform the corresponding database operations on the `Task` table.
        *   All routes will be protected to ensure only the authenticated user can manage their own tasks.
    *   **Database:**
        *   The `Task` model in `prisma/schema.prisma` will be used. The `userId` field will be used to associate tasks with users.
  </tech-spec>

  <prisma-schema>
    ```prisma
    model Task {
      id          String   @id @default(cuid())
      userId      String
      user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
      type        String   // CANVAS_ASSIGNMENT or PERSONAL
      canvasAssignmentId String?
      title       String
      description String?
      dueDate     DateTime?
      courseName  String?
      canvasHtmlUrl String?
      isCompleted Boolean  @default(false)
      priority    String   @default("MEDIUM") // LOW, MEDIUM, HIGH
      estimatedTime Int?
      timeSpent   Int      @default(0)
      createdAt   DateTime @default(now())
      updatedAt   DateTime @updatedAt
    }
    ```
  </prisma-schema>

  <file-paths>
    *   API Routes: `pages/api/tasks/index.ts`, `pages/api/tasks/[id].ts`
    *   Tasks Page: `pages/tasks.tsx`
    *   Prisma Schema: `prisma/schema.prisma`
  </file-paths>

  <documentation>
    *   Prisma Client: https://www.prisma.io/docs/concepts/components/prisma-client
    *   React Query: https://tanstack.com/query/v4/docs/react/overview
  </documentation>
</context>
