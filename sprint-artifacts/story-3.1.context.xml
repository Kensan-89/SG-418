<context>
  <story>
    **Story 3.1: Task Prioritization**

    As a logged-in user,
    I want to set a priority level (e.g., high, medium, low) for my tasks,
    So that I can visually distinguish and focus on what is most important.

    **Acceptance Criteria:**
    1. Users can assign a priority level when creating or editing a task.
    2. The priority level is visually represented in all task views (Agenda, Weekly, Today).
    3. Users can filter or sort tasks by priority.
  </story>

  <tech-spec>
    **Story 3.1: Task Prioritization**

    *   **Frontend:**
        *   Update the task creation/editing UI (e.g., in `/pages/tasks.tsx` or a task detail modal) to include a dropdown or radio buttons for selecting priority (LOW, MEDIUM, HIGH).
        *   Visually represent the priority level in task lists (e.g., color-coding, icons) in `/pages/tasks.tsx`, `/pages/agenda.tsx`, `/pages/weekly-planner.tsx`, and `/pages/today.tsx`.
    *   **Backend:**
        *   The existing `/api/tasks` (POST and PUT) endpoints will be updated to accept and store the `priority` field for tasks.
    *   **Database:**
        *   The `Task` model in `prisma/schema.prisma` already has a `priority` field.
  </tech-spec>

  <prisma-schema>
    ```prisma
    model Task {
      id          String   @id @default(cuid())
      userId      String
      user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
      type        String   // CANVAS_ASSIGNMENT or PERSONAL
      canvasAssignmentId String?
      title       String
      description String?
      dueDate     DateTime?
      courseName  String?
      canvasHtmlUrl String?
      isCompleted Boolean  @default(false)
      priority    String   @default("MEDIUM") // LOW, MEDIUM, HIGH
      estimatedTime Int?
      timeSpent   Int      @default(0)
      createdAt   DateTime @default(now())
      updatedAt   DateTime @updatedAt
    }
    ```
  </prisma-schema>

  <file-paths>
    *   API Routes: `pages/api/tasks/index.ts`, `pages/api/tasks/[id].ts`
    *   Tasks Page: `pages/tasks.tsx`
    *   Agenda Page: `pages/agenda.tsx`
    *   Weekly Planner Page: `pages/weekly-planner.tsx`
    *   Today Dashboard Page: `pages/today.tsx`
    *   Prisma Schema: `prisma/schema.prisma`
  </file-paths>

  <documentation>
    *   React Forms: https://react.dev/learn/managing-state#forms
  </documentation>
</context>
