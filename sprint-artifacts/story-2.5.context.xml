<context>
  <story>
    **Story 2.5: Weekly Planner View**

    As a logged-in user,
    I want a weekly planner view of all my tasks and events,
    So that I can effectively plan my week ahead.

    **Acceptance Criteria:**
    1. A new "Weekly" view is available.
    2. It displays a 7-day layout (e.g., Monday to Sunday).
    3. All tasks, assignments, and events for that week are displayed in their respective day columns.
    4. The user can navigate to the next and previous weeks.
  </story>

  <tech-spec>
    **Story 2.5: Weekly Planner View**

    *   **Frontend:**
        *   A new page `/pages/weekly-planner.tsx` will be created.
        *   This page will display tasks and events for a chosen week.
        *   It will fetch data from `/api/tasks` and `/api/calendar/events`, similar to the Agenda view, but with additional query parameters for date ranges.
        *   The UI will provide navigation to move between weeks (e.g., "Previous Week", "Next Week" buttons).
        *   The layout will represent a 7-day week, possibly with columns for each day.
    *   **Backend:**
        *   The existing `/api/tasks` and `/api/calendar/events` endpoints will be sufficient, but they will need to be updated to accept `startDate` and `endDate` query parameters to filter data for the selected week.
  </tech-spec>

  <prisma-schema>
    ```prisma
    model User {
      id            String    @id @default(cuid())
      name          String?
      email         String?   @unique
      emailVerified DateTime?
      image         String?
      accounts      Account[]
      sessions      Session[]
      tasks         Task[]
      calendarEvents CalendarEvent[]
      canvasApiKey  String?
      googleCalendarAccessToken  String?
      googleCalendarRefreshToken String?
      selectedCalendarIds        Json?
      preferredStudyTimes Json?
    }

    model Task {
      id          String   @id @default(cuid())
      userId      String
      user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
      type        String   // CANVAS_ASSIGNMENT or PERSONAL
      canvasAssignmentId String?
      title       String
      description String?
      dueDate     DateTime?
      courseName  String?
      canvasHtmlUrl String?
      isCompleted Boolean  @default(false)
      priority    String   @default("MEDIUM") // LOW, MEDIUM, HIGH
      estimatedTime Int?
      timeSpent   Int      @default(0)
      createdAt   DateTime @default(now())
      updatedAt   DateTime @updatedAt
    }

    model CalendarEvent {
      id            String   @id @default(cuid())
      userId        String
      user          User     @relation(fields: [userId], references: [id], onDelete: Cascade)
      googleEventId String   @unique
      calendarId    String
      title         String
      description   String?
      startTime     DateTime
      endTime       DateTime
      isAllDay      Boolean  @default(false)
      createdAt     DateTime @default(now())
      updatedAt     DateTime @updatedAt
    }
    ```
  </prisma-schema>

  <file-paths>
    *   API Routes: `pages/api/tasks/index.ts`, `pages/api/calendar/events.ts`
    *   Weekly Planner Page: `pages/weekly-planner.tsx`
    *   Prisma Schema: `prisma/schema.prisma`
  </file-paths>

  <documentation>
    *   JavaScript Date object: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date
  </documentation>
</context>
